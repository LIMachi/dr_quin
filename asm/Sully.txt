section .bss%1$cs resb 80%1$csection .data%1$cc db%2$c%3$s%2$c,0%1$cn db%2$c./Sully_%%d.s%2$c,0%1$cm db%2$cw%2$c,0%1$cg db%2$cnasm -f macho64 Sully_%%1$d.s -o Sully_%%1$d && gcc Sully_%%1$d.o -o Sully_%%1$d && ./Sully_%%1$d%2$c,0%1$csection .text%1$cglobal _main%1$cextern _snprintf%1$cextern _access%1$cextern _fopen%1$cextern _fprintf%1$cextern _fclose%1$cextern _system%1$c_main:push rbp%1$cmov r15,%4$d%1$clea rdi,[rel s]%1$cmov rsi,80%1$clea rdx,[rel n]%1$cmov rcx,r15%1$ccall _snprintf%1$clea rdi,[rel s]%1$cmov rsi,0%1$ccall _access%1$ccmp rax,0%1$cjnz _i%1$cdec r15%1$c_i:cmp r15,0%1$cjle _e%1$clea rdi,[rel s]%1$cmov rsi,80%1$clea rdx,[rel n]%1$cmov rcx,r15%1$ccall _snprintf%1$clea rdi,[rel s]%1$clea rsi,[rel m]%1$ccall _fopen%1$cmov r14,rax%1$cmov rdi,r14%1$clea rsi,[rel c]%1$cmov rdx,10%1$cmov rcx,34%1$cmov r8,rsi%1$cmov r9,r15%1$ccall _fprintf%1$cmov rdi,r14%1$ccall _fclose%1$clea rdi,[rel s]%1$cmov rsi,80%1$clea rdx,[rel g]%1$cmov rcx,r15%1$ccall _snprintf%1$clea rdi,[rel s]%1$ccall _system%1$c_e:pop rbp%1$cmov rax,0%1$cret%1$c
